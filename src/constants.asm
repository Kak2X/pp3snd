DEF SNDSLOT0               EQU $00
DEF SNDSLOT1               EQU $01
DEF SNDSLOT2               EQU $02
DEF SNDSLOT3               EQU $03
DEF SNDSLOT4               EQU $04
DEF SNDSLOT5               EQU $05
DEF SNDSLOT6               EQU $06
DEF SNDSLOT7               EQU $07
DEF SNDSLOTPAUSE           EQU $08

; NRx1
DEF SNDDUTY_12             EQU 0
DEF SNDDUTY_25             EQU 1
DEF SNDDUTY_50             EQU 2
DEF SNDDUTY_75             EQU 3

DEF WAVE_00                EQU $00
DEF WAVE_01                EQU $01
DEF WAVE_02                EQU $02
DEF WAVE_03                EQU $03
DEF WAVE_04                EQU $04
DEF WAVE_05                EQU $05
DEF WAVE_06                EQU $06
DEF WAVE_07                EQU $07
DEF WAVE_08                EQU $08
DEF WAVE_09                EQU $09
DEF WAVE_0A                EQU $0A
DEF WAVE_0B                EQU $0B
DEF WAVE_0C                EQU $0C
DEF WAVE_0D                EQU $0D
DEF WAVE_0E                EQU $0E
DEF WAVE_0F                EQU $0F
DEF WAVE_10                EQU $10
DEF WAVE_11                EQU $11
DEF WAVE_12                EQU $12
DEF WAVE_13                EQU $13
DEF WAVE_14                EQU $14

DEF VIBRATO_NONE           EQU $00
DEF VIBRATO_01             EQU $01
DEF VIBRATO_02             EQU $02
DEF VIBRATO_03             EQU $03
DEF VIBRATO_04             EQU $04
DEF VIBRATO_05             EQU $05
DEF VIBRATO_06             EQU $06
DEF VIBRATO_07             EQU $07
DEF VIBRATO_08             EQU $08
DEF VIBRATO_09             EQU $09
DEF VIBRATO_0A             EQU $0A
DEF VIBRATO_0B             EQU $0B
DEF VIBRATO_0C             EQU $0C
DEF VIBRATO_0D             EQU $0D
DEF VIBRATO_0E             EQU $0E
DEF VIBRATO_0F             EQU $0F
DEF VIBRATO_10             EQU $10
DEF VIBRATO_11             EQU $11
DEF VIBRATO_12             EQU $12
DEF VIBRATO_13             EQU $13
DEF VIBRATO_14             EQU $14
DEF VIBRATO_15             EQU $15
DEF VIBRATO_16             EQU $16
DEF VIBRATO_17             EQU $17
DEF VIBRATO_18             EQU $18
DEF VIBRATO_19             EQU $19
DEF VIBRATO_1A             EQU $1A
DEF VIBRATO_1B             EQU $1B
DEF VIBRATO_1C             EQU $1C
DEF VIBRATO_1D             EQU $1D
DEF VIBRATO_1E             EQU $1E
DEF VIBRATO_1F             EQU $1F
DEF VIBRATO_20             EQU $20
DEF VIBRATO_21             EQU $21
DEF VIBRATO_22             EQU $22
DEF VIBRATO_23             EQU $23
DEF VIBRATO_24             EQU $24
DEF VIBRATO_25             EQU $25
DEF VIBRATO_26             EQU $26
DEF VIBRATO_27             EQU $27
DEF VIBRATO_28             EQU $28
DEF VIBRATO_29             EQU $29
DEF VIBRATO_2A             EQU $2A
DEF VIBRATO_2B             EQU $2B
DEF VIBRATO_2C             EQU $2C
DEF VIBRATO_2D             EQU $2D
DEF VIBRATO_2E             EQU $2E
DEF VIBRATO_2F             EQU $2F
DEF VIBRATO_30             EQU $30
DEF VIBRATO_31             EQU $31
DEF VIBRATO_32             EQU $32
DEF VIBRATO_33             EQU $33
DEF VIBRATO_34             EQU $34
DEF VIBRATO_35             EQU $35
DEF VIBRATO_36             EQU $36
DEF VIBRATO_37             EQU $37
DEF VIBRATO_38             EQU $38
DEF VIBRATO_39             EQU $39
DEF VIBRATO_3A             EQU $3A
DEF VIBRATO_3B             EQU $3B
DEF VIBRATO_3C             EQU $3C
DEF VIBRATO_3D             EQU $3D
DEF VIBRATO_3E             EQU $3E
DEF VIBRATO_3F             EQU $3F
DEF VIBRATO_40             EQU $40
DEF VIBRATO_41             EQU $41
DEF VIBRATO_42             EQU $42
DEF VIBRATO_43             EQU $43
DEF VIBRATO_44             EQU $44
DEF VIBRATO_45             EQU $45
DEF VIBRATO_46             EQU $46
DEF VIBRATO_47             EQU $47
DEF VIBRATO_48             EQU $48
DEF VIBRATO_49             EQU $49
DEF VIBRATO_4A             EQU $4A
DEF VIBRATO_4B             EQU $4B
DEF VIBRATO_4C             EQU $4C
DEF VIBRATO_4D             EQU $4D
DEF VIBRATO_4E             EQU $4E
DEF VIBRATO_4F             EQU $4F
DEF VIBRATO_50             EQU $50
DEF VIBRATO_51             EQU $51
DEF VIBRATO_52             EQU $52
DEF VIBRATO_53             EQU $53
DEF VIBRATO_54             EQU $54
DEF VIBRATO_55             EQU $55
DEF VIBRATO_56             EQU $56
DEF VIBRATO_57             EQU $57
DEF VIBRATO_58             EQU $58
DEF VIBRATO_59             EQU $59
DEF VIBRATO_5A             EQU $5A
DEF VIBRATO_5B             EQU $5B
DEF VIBRATO_5C             EQU $5C
DEF VIBRATO_5D             EQU $5D
DEF VIBRATO_5E             EQU $5E
DEF VIBRATO_5F             EQU $5F
DEF VIBRATO_60             EQU $60
DEF VIBRATO_61             EQU $61
DEF VIBRATO_62             EQU $62
DEF VIBRATO_63             EQU $63
DEF VIBRATO_64             EQU $64
DEF VIBRATO_65             EQU $65
DEF VIBRATO_66             EQU $66
DEF VIBRATO_67             EQU $67
DEF VIBRATO_68             EQU $68
DEF VIBRATO_69             EQU $69
DEF VIBRATO_6A             EQU $6A
DEF VIBRATO_6B             EQU $6B
DEF VIBRATO_6C             EQU $6C
DEF VIBRATO_6D             EQU $6D
DEF VIBRATO_6E             EQU $6E
DEF VIBRATO_6F             EQU $6F
DEF VIBRATO_70             EQU $70
DEF VIBRATO_71             EQU $71
DEF VIBRATO_72             EQU $72
DEF VIBRATO_73             EQU $73
DEF VIBRATO_74             EQU $74
DEF VIBRATO_75             EQU $75
DEF VIBRATO_76             EQU $76
DEF VIBRATO_77             EQU $77
DEF VIBRATO_78             EQU $78
DEF VIBRATO_79             EQU $79
DEF VIBRATO_7A             EQU $7A
DEF VIBRATO_7B             EQU $7B
DEF VIBRATO_7C             EQU $7C
DEF VIBRATO_7D             EQU $7D
DEF VIBRATO_7E             EQU $7E
DEF VIBRATO_7F             EQU $7F

;                                  ; Used in channels...
DEF INSTR_NONE             EQU $00
DEF INSTR_01               EQU $01 ; 3
DEF INSTR_02               EQU $02 ; 2
DEF INSTR_03               EQU $03 ; 1 2
DEF INSTR_04               EQU $04 ; 1
DEF INSTR_05               EQU $05 ; 1 2 3
DEF INSTR_06               EQU $06 ; 1
DEF INSTR_07               EQU $07 ; 1 2
DEF INSTR_08               EQU $08 ; 1 3
DEF INSTR_09               EQU $09 ; 1 2
DEF INSTR_0A               EQU $0A ; 1 2
DEF INSTR_0B               EQU $0B ; 1 2
DEF INSTR_11               EQU $11 ; 1 2
DEF INSTR_12               EQU $12 ; 1 2
DEF INSTR_13               EQU $13 ; 2 3
DEF INSTR_15               EQU $15 ; 1 2
DEF INSTR_16               EQU $16 ; 2
DEF INSTR_17               EQU $17 ; 1 2
DEF INSTR_18               EQU $18 ; 3 2
DEF INSTR_19               EQU $19 ; 2
DEF INSTR_1B               EQU $1B ; 3
DEF INSTR_1E               EQU $1E ; 4
DEF INSTR_2E               EQU $2E ; 1 2 3
DEF INSTR_2F               EQU $2F ; 1
DEF INSTR_30               EQU $30 ; 1 3
DEF INSTR_31               EQU $31 ; 1
DEF INSTR_32               EQU $32 ; 3
DEF INSTR_33               EQU $33 ; 1 2 3
DEF INSTR_34               EQU $34 ; 1 2 3
DEF INSTR_35               EQU $35 ; 1
DEF INSTR_36               EQU $36 ; 1 2
DEF INSTR_37               EQU $37 ; 1
DEF INSTR_38               EQU $38 ; 1 2
DEF INSTR_39               EQU $39 ; 1
DEF INSTR_3B               EQU $3B ; 1
DEF INSTR_3C               EQU $3C ; 2
DEF INSTR_3D               EQU $3D ; 1 2 3
DEF INSTR_3E               EQU $3E ; 1 2 3
DEF INSTR_40               EQU $40 ; 2 3
DEF INSTR_41               EQU $41 ; 1 2
DEF INSTR_42               EQU $42 ; 3
DEF INSTR_56               EQU $56 ; 1 3
DEF INSTR_57               EQU $57 ; 2
DEF INSTR_58               EQU $58 ; 1
DEF INSTR_5A               EQU $5A ; 2
DEF INSTR_5B               EQU $5B ; 1 2
DEF INSTR_5C               EQU $5C ; 1 2
DEF INSTR_5D               EQU $5D ; 1
DEF INSTR_5E               EQU $5E ; 1
DEF INSTR_5F               EQU $5F ; 1
DEF INSTR_60               EQU $60 ; 1
DEF INSTR_61               EQU $61 ; 2
DEF INSTR_62               EQU $62 ; 3
DEF INSTR_63               EQU $63 ; 3
DEF INSTR_65               EQU $65 ; 1 2
DEF INSTR_67               EQU $67 ; 2
DEF INSTR_68               EQU $68 ; 1 2
DEF INSTR_69               EQU $69 ; 1 2
DEF INSTR_6A               EQU $6A ; 1 2
DEF INSTR_6B               EQU $6B ; 3
DEF INSTR_6D               EQU $6D ; 2
DEF INSTR_6E               EQU $6E ; 1
DEF INSTR_6F               EQU $6F ; 1
DEF INSTR_70               EQU $70 ; 1
DEF INSTR_71               EQU $71 ; 1
DEF INSTR_73               EQU $73 ; 1

DEF PRESET_00              EQU $C0
DEF PRESET_01              EQU $C1
DEF PRESET_02              EQU $C2
DEF PRESET_03              EQU $C3
DEF PRESET_04              EQU $C4
DEF PRESET_05              EQU $C5
DEF PRESET_06              EQU $C6
DEF PRESET_07              EQU $C7
DEF PRESET_08              EQU $C8
DEF PRESET_09              EQU $C9

;   VAL                            | ENCODED IN COMMAND's byte1
DEF NOTELEN_CUSTOM         EQU $00
DEF NOTELEN_01             EQU $01 ; $F0 or $DF
DEF NOTELEN_02             EQU $02 ; $F1 or $E0
DEF NOTELEN_03             EQU $03 ; $F2 or $E1
DEF NOTELEN_04             EQU $04 ; $F3 or $E2
DEF NOTELEN_06             EQU $05 ; $F4 or $E3
DEF NOTELEN_08             EQU $06 ; $F5 or $E4
DEF NOTELEN_0C             EQU $07 ; $F6 or $E5
DEF NOTELEN_10             EQU $08 ; $F7 or $E6
DEF NOTELEN_18             EQU $09 ; $F8 or $E7
DEF NOTELEN_20             EQU $0A ; $F9 or $E8
DEF NOTELEN_30             EQU $0B ; $FA or $E9
DEF NOTELEN_09             EQU $0C ; $FB or $EA
DEF NOTELEN_12             EQU $0D ; $FC or $EB
DEF NOTELEN_1E             EQU $0E ; $FD or $EC
DEF NOTELEN_24             EQU $0F ; $FE or $ED
DEF NOTELEN_2A             EQU $10 ; $FF or $EE
DEF NOTELENARG_LENGTH      EQU $11 ; Range of valid values for the note length parameter (SNDDATACMD_NOTE & supersets)

; iSndChInfo_ChId
DEF SNDCH_PULSE1           EQU $00
DEF SNDCH_PULSE2           EQU $01
DEF SNDCH_WAVE             EQU $02
DEF SNDCH_NOISE            EQU $03

; iSndChInfo_Vibrato
DEF SVBB_SET               EQU 7 ; If set, iSndChInfo_Vibrato should be treated as NR10 data. Otherwise, it's a Vibrato ID.
DEF SVB_SET                EQU 1 << SVBB_SET

; wSndFlags - Sound driver flags
DEF SDTB_EXEC              EQU 0 ; Marks the sound driver as being executed.
DEF SDTB_PAUSE             EQU 1 ; Sound driver paused. Only SNDSLOTPAUSE / wSndChInfoEx0 can play.
DEF SDTB_PCMON             EQU 2 ; PCM enabled
DEF SDTB_FADEOUT           EQU 4 ; Fade in or out?
DEF SDTB_FADE              EQU 5 ; Fade enabled (all slots)
DEF SDT_EXEC               EQU 1 << SDTB_EXEC
DEF SDT_PAUSE              EQU 1 << SDTB_PAUSE
DEF SDT_PCMON              EQU 1 << SDTB_PCMON
DEF SDT_FADEOUT            EQU 1 << SDTB_FADEOUT
DEF SDT_FADE               EQU 1 << SDTB_FADE

; hSndChInfoNewFlags - Temporary slot flags only valid this frame
DEF SFNB_KEYHOLDNEW        EQU 3 ; Started holding keys this frame (first frame when SSTB_KEYHOLD is set)
DEF SFNB_TRIG              EQU 5 ; Sound channel should be retriggered.
DEF SFNB_NEWNOTE           EQU 7 ; New note set on this frame. Used in practice to execute the Portamento setup code.
DEF SFN_KEYHOLDNEW         EQU 1 << SFNB_KEYHOLDNEW
DEF SFN_TRIG               EQU 1 << SFNB_TRIG
DEF SFN_NEWNOTE            EQU 1 << SFNB_NEWNOTE

; iSndChInfo_Status - Slot status
DEF SSTB_CH123             EQU 0 ; Slot contains channel 1-3 data
DEF SSTB_CH4               EQU 1 ; Slot contains channel 4 data 
DEF SSTB_2                 EQU 2 ; Unused
DEF SSTB_3                 EQU 3 ; Unused
DEF SSTB_KEYHOLD           EQU 4 ; Forces the key to be held (never unset SSEB_KEYON)
DEF SSTB_PAUSEREST         EQU 5 ; Pause BGM while playing this (if set, pause lower priority slots)
DEF SSTB_PRIORITY          EQU 6 ; Slot has high priority
DEF SSTB_7                 EQU 7 ; Unused
DEF SST_CH123              EQU 1 << SSTB_CH123
DEF SST_CH4                EQU 1 << SSTB_CH4
DEF SST_2                  EQU 1 << SSTB_2
DEF SST_3                  EQU 1 << SSTB_3
DEF SST_KEYHOLD            EQU 1 << SSTB_KEYHOLD
DEF SST_PAUSEREST          EQU 1 << SSTB_PAUSEREST
DEF SST_PRIORITY           EQU 1 << SSTB_PRIORITY
DEF SST_7                  EQU 1 << SSTB_7

; iSndChInfo_FxFlags0
DEF SSEB_FADEDONE          EQU 1 ; Marks if the slot fade is finished
DEF SSEB_KEYON             EQU 2 ; If set, the key is being pressed. Instrument data can loop until the key is released.
DEF SSEB_USEFADEVOL        EQU 3 ; Use the faded volume. Must be set to actually hear the fade.
DEF SSEB_FADEOUT           EQU 4 ; Fade in or out
DEF SSEB_FADE              EQU 5 ; Fade enabled (current slot)
DEF SSEB_NSUP              EQU 6 ; Portamento direction (if set, slide notes up)
DEF SSEB_NS                EQU 7 ; Portamento enabled

DEF SSE_FADEDONE           EQU 1 << SSEB_FADEDONE
DEF SSE_KEYON              EQU 1 << SSEB_KEYON
DEF SSE_USEFADEVOL         EQU 1 << SSEB_USEFADEVOL
DEF SSE_FADEOUT            EQU 1 << SSEB_FADEOUT
DEF SSE_FADE               EQU 1 << SSEB_FADE
DEF SSE_NSUP               EQU 1 << SSEB_NSUP
DEF SSE_NS                 EQU 1 << SSEB_NS
DEF SSE_NSDOWN             EQU 0

; iSndChInfo_FxFlags1
DEF SSEB_PITCHBEND         EQU 0 ; Enable pitch bend
DEF SSEB_PCM               EQU 5 ; PCM played in slot
DEF SSEB_MUTED             EQU 6 ; Slot is processed but won't play audio

; iSndChInfo_KeyRelTarget
DEF STGB_END               EQU 7 ; If set, the key release timing is relative to the end of the note. Otherwise, it's to the start.
DEF STG_END                EQU 1 << STGB_END


; SOUND VIBRATO/INSTRUMENT DATA COMMANDS
DEF SECB_SPEC_START        EQU 7
DEF SNDENVCMD_LOOP         EQU $80
DEF SNDENVCMD_LOOPFAR      EQU $81
DEF SNDENVCMD_RESET        EQU $82
DEF SNDENVCMD_LOOPCOND     EQU $83
DEF SNDENVCMD_LOOPFARCOND  EQU $84

; SOUND ID COMMANDS
DEF SNDCMD_START           EQU $F0
DEF SNDCMD_RESET           EQU $F1
DEF SNDCMD_STOP            EQU $F2
DEF SNDCMD_FADEOUT         EQU $F3
DEF SNDCMD_FADEIN_STARTNEW EQU $F4
DEF SNDCMD_FADEIN          EQU $F5
DEF SNDCMD_PAUSE           EQU $F6
DEF SNDCMD_UNPAUSE         EQU $F7

; SOUND DATA COMMANDS
DEF SNDDATACMD_NOTE_START            EQU $00
DEF SNDDATACMD_NOTE_END              EQU $7F

DEF SNDDATACMDB_SPEC_START           EQU 7
DEF SNDDATACMD_SPEC_START            EQU $80
DEF SNDDATACMD_JP                    EQU $80
DEF SNDDATACMD_DJNZ                  EQU $81
DEF SNDDATACMD_END                   EQU $82
DEF SNDDATACMD_VIBRATO               EQU $83
DEF SNDDATACMD_PITCH_BEND            EQU $84
DEF SNDDATACMD_PLAYSNDARG            EQU $85
DEF SNDDATACMD_END_SAVEID            EQU $86
DEF SNDDATACMD_VOL                   EQU $87
DEF SNDDATACMD_INSTRUMENT            EQU $88
DEF SNDDATACMD_INC_BASE_NOTE         EQU $89
DEF SNDDATACMD_INC_VOL               EQU $8A
DEF SNDDATACMD_PLAYSND               EQU $8B
DEF SNDDATACMD_NOP                   EQU $8C
DEF SNDDATACMD_VAR                   EQU $8D
DEF SNDDATACMD_NOISE_SWEEP           EQU $8E
DEF SNDDATACMD_NOISE_SWEEP_SINGLE    EQU $8F
DEF SNDDATACMD_STATUS                EQU $90
DEF SNDDATACMD_ORSAVEID              EQU $91
DEF SNDDATACMD_NOISE_FREQ            EQU $92
DEF SNDDATACMD_FADE                  EQU $93
DEF SNDDATACMD_NOTE_SLIDE            EQU $94
DEF SNDDATACMD_JP_FADE               EQU $95
DEF SNDDATACMD_SPEED                 EQU $96
DEF SNDDATACMD_INC_FREQ_OFFSET       EQU $97
DEF SNDDATACMD_CH                    EQU $98
DEF SNDDATACMD_TOGGLE_KEYHOLD        EQU $99
DEF SNDDATACMD_CALL                  EQU $9A
DEF SNDDATACMD_RET                   EQU $9B
DEF SNDDATACMD_INC_BASE_NOTE_BY_LOOP EQU $9C
DEF SNDDATACMD_KEYON                 EQU $9D
DEF SNDDATACMD_IFCH                  EQU $9E
DEF SNDDATACMD_JPCH                  EQU $9F
DEF SNDDATACMD_DUTY                  EQU $A0
DEF SNDDATACMD_PAN                   EQU $A1
DEF SNDDATACMD_SETS3                 EQU $A2
DEF SNDDATACMD_CLRS3                 EQU $A3
DEF SNDDATACMD_PLAYPCM               EQU $A4
DEF SNDDATACMD_PLAYSLOTPCM           EQU $A5
DEF SNDDATACMD_SPEC_END              EQU $A5

DEF SNDDATACMD_NOTEPRESET_START      EQU $C0
DEF SNDDATACMD_NOTEPRESET_END        EQU $C9

DEF SNDDATACMD_SAMENOTE_START        EQU $100-(NOTELENARG_LENGTH*2) ; $DE
DEF SNDDATACMD_SAMENOTE_END          EQU $100-1 ; $FF

DEF SNDDATACMD_NOTELENARG_START      EQU $100-(NOTELENARG_LENGTH*2)
DEF SNDDATACMD_NOTELENARG_NOMID      EQU SNDDATACMD_NOTELENARG_START+0
DEF SNDDATACMD_NOTELENARG_WITHMID    EQU SNDDATACMD_NOTELENARG_START+NOTELENARG_LENGTH*1

; SoundDataCmd_SlotFade
DEF SSFB_FADEOUT     EQU 7 ; If set, it's a fade out
DEF SSF_FADEOUT      EQU 1 << SSFB_FADEOUT
DEF SSF_FADEIN       EQU 0

; SoundDataCmd_NoteSlide
DEF SNSB_UP          EQU 7 ; Portamento direction (If set, up)
DEF SNS_UP           EQU 1 << SNSB_UP

; Sound Preset Flags
DEF SPRB_USECH4SWEEP EQU 7 ; Use byte3 as Noise sweep data, otherwisw it's used as Pulse 1 sweep
DEF SPR_USECH4SWEEP  EQU 1 << SPRB_USECH4SWEEP

; Slot loop flags
DEF SOUNDB_PAUSED    EQU 7
DEF SOUND_PAUSED     EQU 1 << SOUNDB_PAUSED